---
layout: page
title: 如何让文档持续更新
tagline: Supporting tagline
---
{% include JB/setup %}

    最近在工作中遇到一个案例，一位基础接口的开发人员在修改了接口后，没有通知使用接口的干系人，也没有更新wiki上的接口协议文档，接口上线后导致依赖此接口的系统发生故障。这个案例引申出可改进提升的地方有很多，其中之一就是如何去及时更新接口文档。
    这其实是一个老生长谈问题，我从四年前带项目开始，就一直为这个问题苦恼不已。最典型的例子还有两个，一个是设计文档，一个是自动化测试用例。
    设计文档的重要性大家都很清楚，开始会花相当的人力去完成一个漂亮的文档，里面描述的都很清晰。但随着系统上线后的问题修复、需求的迭代、自身的重构，一段时候之后，大家再去看这个设计文档，就基本没什么价值了，因为系统发生了如此多的变化，但并不是每个影响到设计的变动都如实同步到了文档中，要完全实现这种同步，需要开发人员有良好的素质与负责人花费大量时间和精力的check。
    自动化测试用例也是如此，这些用例开始的时候建设的非常完善，各种自动化CASE跑起，持续集成跑起，再做个演示汇报，领导和团队都很高兴，各种业绩良好。但随着一些紧急需求、倒排项目的插入，测试时间被严重压缩，测试人员只好简单粗暴的手动执行CASE，赶紧搞完上线。手动执行CASE的人手都不够，哪还来的人去维护那些自动化测试用例呢，久而久之，这些自动化用例就慢慢的一个都跑不起来，完全失去作用。更加恶性循环的时，由于手动执行大量用例费时费力，当一个功能上线时，测试倾向于只测这个功能相关的CASE，而不去或少部分测试可能影响到的CASE，漏测结果就是导致上线A功能，结果B功能出了问题。
    当然，这个问题不是无解的，在时间和资源都非常有限的情况下，要避免上述情况，只需要做到一点，让这个更新动作，变成产品交付环节中必须经过且有用的一个环节即可。
    比如上例中自动化测试用例的更新，我们要求所有的测试，必须只能用自动化测试，只有自动化测试报告通过发出了，产品才能上线。那么测试的工作就只有一件，设计并修改更新用例，并跑一遍生成报告，由于自动化执行成本低，所以可以终结前面说的恶性循环，测试直接会把所有用例都跑一遍，杜绝了漏测。
    只有必须的东西才能保证绝对不会遗漏，因为遗漏了会导致工作没办法进行下去。通过这种思路，我们可以设计出多种规则和流程，来保证这个东西及时的被更新。
